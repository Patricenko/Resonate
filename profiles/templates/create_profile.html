{% extends "base.html" %}
{% load user_form_tags %}
{% block title %}Create Profile - Dinter{% endblock %}

{% block content %}
<div class="row justify-content-center" style="min-height: 600px;">
  <!-- Form column -->
  <div class="col-md-8 d-flex flex-column">
    <div class="form-with-validation flex-grow-1 d-flex flex-column p-4">
      <h2 class="mb-4 text-center text-pink">Create Your Dinter Profile</h2>
      <form method="POST" enctype="multipart/form-data" novalidate class="flex-grow-1 d-flex flex-column">
        {% csrf_token %}
        <div class="row g-3 flex-grow-1">
          {% for field in form %}
            {% if field.name == 'is_public' %}
              <div class="col-12">
                <div class="form-check d-flex align-items-center">
                  <label for="{{ field.id_for_label }}" class="form-check-label me-3 mb-0" style="cursor: pointer;">
                    {{ field.label }}
                  </label>
                  {{ field|add_class:"form-check-input" }}
                </div>
                {% if field.errors %}
                  <div class="text-danger small mt-1">
                    {% for error in field.errors %}
                      {{ error }}<br>
                    {% endfor %}
                  </div>
                {% endif %}
              </div>
            {% else %}
              <div class="{% if field.name in 'bio interests social_links audio_bio profile_photo' %}col-12{% else %}col-md-6{% endif %}">
                <label for="{{ field.id_for_label }}" class="form-label">{{ field.label }}</label>
                {{ field|add_class:"form-control" }}
                {% if field.errors %}
                  <div class="text-danger small mt-1">
                    {% for error in field.errors %}
                      {{ error }}<br>
                    {% endfor %}
                  </div>
                {% endif %}
              </div>
            {% endif %}
          {% endfor %}
        </div>
        <button type="submit" class="form-submit mt-4 w-100">Create Profile</button>
      </form>
    </div>
  </div>

  <!-- Preview column -->
  <div class="col-md-4 d-none d-md-flex align-items-center">
    <div class="p-4 bg-dark rounded shadow w-100" style="min-height: 450px;">
      <h4 class="text-pink mb-3">Profile Preview</h4>
      <p><strong>Username:</strong> {{ user.username }}</p>
      <p><strong>Email:</strong> {{ user.email }}</p>
      <p><em>Preview updates after form submission.</em></p>
    </div>
  </div>
</div>
{% endblock %}
